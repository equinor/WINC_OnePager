// Definition for the devcontainer used by GitHub Codespaces.
{
    "name": "Full-stack devcontainer (Backend & Frontend)",
    "image": "mcr.microsoft.com/devcontainers/universal:2",
    "hostRequirements": {
        "cpus": 8,
        "memory": "8gb",
        "storage": "32gb"
    },
    "postAttachCommand": {
        "backend": "uv sync --all-groups",
    },
    "customizations": {
        "vscode": {
            "settings": {
                // Set formatter for specific filetypes and enable format on save
                "[toml]": {
                    "editor.defaultFormatter": "tamasfe.even-better-toml",
                    "editor.formatOnSave": true
                },
                "[json][jsonc]": {
                    "editor.defaultFormatter": "vscode.json-language-features",
                    "editor.formatOnSave": true
                },
                "[python]": {
                    "editor.formatOnSave": true,
                    "editor.defaultFormatter": "charliermarsh.ruff",
                    "editor.codeActionsOnSave": {
                        "source.organizeImports": "explicit",
                        "source.fixAll": "explicit"
                    }
                },
                "editor.formatOnSave": true,
                // Python specific settings
                "notebook.formatOnSave.enabled": true,
                "python.defaultInterpreterPath": ".venv/bin/python",

            },
            // Extensions that is handy to have in the devcontainer
            "extensions": [
                "charliermarsh.ruff",
                "ms-python.python",
                "ms-toolsai.jupyter",
                "tamasfe.even-better-toml",
                "eamodio.gitlens",
                "streetsidesoftware.code-spell-checker",
                "streetsidesoftware.code-spell-checker-norwegian-bokmal",
                "streetsidesoftware.code-spell-checker-scientific-terms"
            ]
        }
    },
    "features": {
        "ghcr.io/va-h/devcontainers-features/uv:1": {}
    }
}
